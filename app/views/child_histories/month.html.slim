- content_for :child_header_actions do
  h5
    = "#{@month.year}年#{@month.month}月"
    small.text-muted = "(#{@child.relative_age(@month)})"
  .row.justify-content-between
    .col
      = link_to '<< 前の月', month_histories_child_path(*ChildHistory.month_path_params(@child, @month - 1.month)), class: 'prev-day'
      span.mr-3.ml-3
        = link_to fa_icon('calendar', text: '本年'), year_histories_child_path(@child, @month.year)
      = link_to '次の月 >>', month_histories_child_path(*ChildHistory.month_path_params(@child, @month + 1.month)), class: 'next-day'

.row.justify-content-center.sticky-top.bg-warning.bg-gradient.text-dark.mb-5(style="z-index:100;")
  .col-sm(style="max-width: 500px")
    = render partial: 'children/header', locals: { child: @child }

.row.justify-content-center
  .col-sm(style="max-width: 500px")
    = render partial: 'child_histories/form', locals: { history: @history }

    - if @histories.blank?
      p
        | 今月の記録はありません。
    - else
      - @histories.each do |history|
        .card.mb-3(id="history-#{history.target_date.to_s}")
          .card-header
            .row.justify-content-between
              .col-sm-10
                - if history.about_date
                  span.mr-2.text-muted = "(だいたい)"
                = dispdate(history.target_date, true)
                .text-muted = "by #{history.author.dispname}"
              .col-sm-2
                = link_to '編集', edit_child_history_path(history)
          .card-body
            h5.card-title = history.title
            - if history.content.present?
              .card-text.text-muted = markdown(history.content)
            - if history.data.present?
              - history.data.each do |key, value|
                .card-text.text-muted = "#{ChildHistory.human_attribute_name("data.#{key}")}: #{value}"
          = link_to image_tag(history.image.url(:small), class: 'card-img-bottom'), history.image.url(:large) if history.image?
